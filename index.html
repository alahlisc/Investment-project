<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ - Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø·Ø±Ø§Ø¨Ù„Ø³</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #006400;
      --secondary-color: gold;
      --accent-color: #0a3d62;
      --light-bg: #f5f7fa;
      --card-bg: #fff;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --text-color: #333;
      --border-radius: 12px;
      --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Cairo', sans-serif;
      background-color: var(--light-bg);
      color: var(--text-color);
      line-height: 1.6;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 25px;
      padding: 15px 20px;
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
      color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo img {
      height: 70px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }
    
    h1 {
      color: white;
      font-size: 1.8em;
      font-weight: 700;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
    }
    
    .header-btn {
      background-color: rgba(255, 255, 255, 0.15);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
    }
    
    .header-btn:hover {
      background-color: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
    }
    
    .nav-tabs {
      display: flex;
      background: white;
      border-radius: var(--border-radius);
      overflow: hidden;
      margin-bottom: 25px;
      box-shadow: var(--box-shadow);
    }
    
    .nav-tab {
      padding: 16px 20px;
      cursor: pointer;
      background: #f8fafc;
      transition: all 0.3s;
      text-align: center;
      flex: 1;
      font-weight: 600;
      border-bottom: 3px solid transparent;
    }
    
    .nav-tab.active {
      background: white;
      color: var(--primary-color);
      border-bottom: 3px solid var(--primary-color);
    }
    
    .nav-tab:hover:not(.active) {
      background: #eef2f7;
    }
    
    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .tab-content.active {
      display: block;
    }
    
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      position: relative;
      overflow: hidden;
      border-top: 4px solid var(--primary-color);
      transition: transform 0.3s;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .card.success { border-top-color: var(--success-color); }
    .card.warning { border-top-color: var(--warning-color); }
    .card.danger { border-top-color: var(--danger-color); }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-label {
      color: var(--accent-color);
      font-size: 0.95em;
      font-weight: 600;
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background-color: var(--light-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary-color);
      font-size: 1.2em;
    }
    
    .card-value {
      font-size: 2.2em;
      font-weight: bold;
      color: var(--text-color);
      margin-bottom: 5px;
    }
    
    .card-change {
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .card-change.positive { color: var(--success-color); }
    .card-change.negative { color: var(--danger-color); }
    
    .charts-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .chart-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
    }
    
    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .chart-title {
      color: var(--accent-color);
      font-size: 1.2em;
      font-weight: 700;
    }
    
    .chart-filter {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      font-family: 'Cairo', sans-serif;
      background-color: var(--light-bg);
    }
    
    /* ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† */
    .tenant-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .category-card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
    }
    
    .category-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .category-title {
      font-size: 1.2em;
      font-weight: 700;
    }
    
    .category-title.completed { color: var(--success-color); }
    .category-title.incomplete { color: var(--warning-color); }
    .category-title.review { color: var(--danger-color); }
    
    .category-count {
      background-color: var(--light-bg);
      padding: 5px 12px;
      border-radius: 20px;
      font-weight: 600;
    }
    
    .tenant-list {
      max-height: 350px;
      overflow-y: auto;
    }
    
    .tenant-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f1f5f9;
    }
    
    .tenant-item:last-child {
      border-bottom: none;
    }
    
    .tenant-info {
      display: flex;
      flex-direction: column;
    }
    
    .tenant-name {
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .tenant-details {
      font-size: 0.85rem;
      color: #64748b;
    }
    
    .tenant-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    
    .status-completed { background-color: #dcfce7; color: var(--success-color); }
    .status-incomplete { background-color: #fef3c7; color: var(--warning-color); }
    .status-review { background-color: #fee2e2; color: var(--danger-color); }
    
    /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    .table-container {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 20px;
      box-shadow: var(--box-shadow);
      margin-bottom: 30px;
      overflow-x: auto;
    }
    
    .table-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .table-title {
      color: var(--accent-color);
      font-size: 1.2em;
      font-weight: 700;
    }
    
    .table-filters {
      display: flex;
      gap: 15px;
    }
    
    .table-filter {
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid #e2e8f0;
      font-family: 'Cairo', sans-serif;
      background-color: var(--light-bg);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 12px 15px;
      text-align: right;
      border-bottom: 1px solid #e2e8f0;
    }
    
    th {
      background-color: var(--light-bg);
      color: var(--accent-color);
      font-weight: 700;
    }
    
    tr:hover {
      background-color: #f8fafc;
    }
    
    /* Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰ */
    .filters {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .filter-item {
      background: white;
      padding: 10px 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .filter-item label {
      margin-left: 8px;
      font-weight: 600;
    }
    
    .filter-item select, .filter-item input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: 'Cairo', sans-serif;
    }
    
    .shop-details {
      background: white;
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-bottom: 20px;
    }
    
    .payment-history {
      margin-top: 20px;
    }
    
    .payment-months {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin-top: 15px;
    }
    
    .payment-month {
      background: #f1f5f9;
      padding: 10px;
      border-radius: 8px;
      text-align: center;
      font-size: 0.9em;
    }
    
    .payment-month.paid {
      background: #dcfce7;
      color: var(--success-color);
      font-weight: 600;
    }
    
    .payment-month.unpaid {
      background: #fee2e2;
      color: var(--danger-color);
      font-weight: 600;
    }
    
    .prediction-card {
      background: white;
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      margin-bottom: 20px;
    }
    
    .prediction-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    
    /* Ø¹Ù†Ø§ØµØ± Ø¬Ø¯ÙŠØ¯Ø© */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .no-data {
      text-align: center;
      padding: 20px;
      color: #64748b;
    }
    
    .rent-distribution {
      margin-top: 30px;
    }
    
    /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø´Ø§Ø´Ø§Øª */
    @media (max-width: 1200px) {
      .charts-container {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 992px) {
      .tenant-categories {
        grid-template-columns: 1fr;
      }
      
      header {
        flex-direction: column;
        text-align: center;
        gap: 15px;
      }
      
      .header-actions {
        justify-content: center;
      }
    }
    
    @media (max-width: 768px) {
      .nav-tabs {
        flex-direction: column;
      }
      
      .stats-cards {
        grid-template-columns: 1fr;
      }
      
      .payment-months {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .filters, .table-filters {
        flex-direction: column;
      }
      
      .table-header {
        flex-direction: column;
        gap: 15px;
      }
    }
    
    @media (max-width: 576px) {
      .container {
        padding: 15px;
      }
      
      .card-value {
        font-size: 1.8rem;
      }
      
      .payment-months {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/5/5e/Al-Ahly_SC_logo.svg/1200px-Al-Ahly_SC_logo.svg.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠ">
        <h1>Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ - Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø·Ø±Ø§Ø¨Ù„Ø³</h1>
      </div>
      <div class="header-actions">
        <button class="header-btn" onclick="exportToExcel()">
          <span>ğŸ“¥</span> ØªØµØ¯ÙŠØ± Excel
        </button>
        <button class="header-btn" onclick="window.print()">
          <span>ğŸ–¨ï¸</span> Ø·Ø¨Ø§Ø¹Ø©
        </button>
        <button class="header-btn" id="refreshData">
          <span>ğŸ”„</span> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        </button>
        <button class="header-btn" id="loginBtn" style="display:none;">
          <span>ğŸ”</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </button>
      </div>
    </header>

    <div class="nav-tabs">
      <div class="nav-tab active" data-tab="dashboard">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
      <div class="nav-tab" data-tab="shops">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
      <div class="nav-tab" data-tab="tenants">ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†</div>
      <div class="nav-tab" data-tab="prediction">ØªÙ†Ø¨Ø¤ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
      <div class="nav-tab" data-tab="annual">Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ</div>
    </div>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="tab-content active" id="dashboard">
      <div class="stats-cards">
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
            <div class="card-icon">ğŸª</div>
          </div>
          <div class="card-value" id="totalShops">0</div>
          <div class="card-change" id="totalArea">0 Ù…ØªØ± Ù…Ø±Ø¨Ø¹</div>
        </div>
        
        <div class="card success">
          <div class="card-header">
            <div class="card-label">Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙÙŠØ©</div>
            <div class="card-icon">âœ“</div>
          </div>
          <div class="card-value" id="completedShops">0</div>
          <div class="card-change positive" id="completedPercentage">0%</div>
        </div>
        
        <div class="card warning">
          <div class="card-header">
            <div class="card-label">Ø§Ù„Ù…Ø­Ù„Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙˆÙÙŠØ©</div>
            <div class="card-icon">âš ï¸</div>
          </div>
          <div class="card-value" id="incompleteShops">0</div>
          <div class="card-change" id="incompletePercentage">0%</div>
        </div>
        
        <div class="card danger">
          <div class="card-header">
            <div class="card-label">Ø§Ù„Ù…Ø­Ù„Ø§Øª ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
            <div class="card-icon">ğŸ”</div>
          </div>
          <div class="card-value" id="reviewShops">0</div>
          <div class="card-change" id="reviewPercentage">0%</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</div>
            <div class="card-icon">ğŸ’°</div>
          </div>
          <div class="card-value" id="totalRevenue">0</div>
          <div class="card-change">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
        </div>
        
        <div class="card success">
          <div class="card-header">
            <div class="card-label">Ø§Ù„Ù…Ø³ØªÙˆÙÙŠÙ† Ù„Ù„Ø¯ÙØ¹</div>
            <div class="card-icon">âœ…</div>
          </div>
          <div class="card-value" id="paidShops">0</div>
          <div class="card-change positive" id="paidPercentage">0% Ù…Ù† Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
        </div>
        
        <div class="card warning">
          <div class="card-header">
            <div class="card-label">Ø§Ù„Ù…ØªØ£Ø®Ø±ÙŠÙ† Ø¹Ù† Ø§Ù„Ø¯ÙØ¹</div>
            <div class="card-icon">â°</div>
          </div>
          <div class="card-value" id="unpaidShops">0</div>
          <div class="card-change" id="unpaidPercentage">0% Ù…Ù† Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
            <div class="card-icon">ğŸ“Š</div>
          </div>
          <div class="card-value" id="avgRent">0</div>
          <div class="card-change">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
        </div>
      </div>
      
      <div class="charts-container">
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©</div>
            <select class="chart-filter" id="phaseChartFilter">
              <option>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„</option>
              <option>Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</option>
              <option>Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</option>
            </select>
          </div>
          <canvas id="phaseComparisonChart"></canvas>
        </div>
        
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</div>
            <select class="chart-filter" id="paymentChartFilter">
              <option>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
              <option>Ø§Ù„Ù…Ø³ØªÙˆÙÙŠÙ†</option>
              <option>ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙˆÙÙŠÙ†</option>
              <option>ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
            </select>
          </div>
          <canvas id="paymentStatusChart"></canvas>
        </div>
      </div>
      
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹</div>
          <select class="chart-filter" id="monthlyChartFilter">
            <option>2024</option>
            <option>2023</option>
            <option>2022</option>
          </select>
        </div>
        <canvas id="monthlyRevenueChart"></canvas>
      </div>
    </div>

    <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª -->
    <div class="tab-content" id="shops">
      <div class="filters">
        <div class="filter-item">
          <label for="phaseFilter">Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</label>
          <select id="phaseFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="1">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</option>
            <option value="2">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="paymentFilter">Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹:</label>
          <select id="paymentFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="paid">Ù…Ø³Ø¯Ø¯</option>
            <option value="unpaid">ØºÙŠØ± Ù…Ø³Ø¯Ø¯</option>
            <option value="review">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="shopFilter">Ø¨Ø­Ø«:</label>
          <input type="text" id="shopFilter" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±">
        </div>
        
        <div class="filter-item">
          <label for="rentFilter">Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±:</label>
          <select id="rentFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="0-1000">Ø£Ù‚Ù„ Ù…Ù† 1000 Ø¯.Ù„</option>
            <option value="1000-1500">1000 - 1500 Ø¯.Ù„</option>
            <option value="1500+">Ø£ÙƒØ«Ø± Ù…Ù† 1500 Ø¯.Ù„</option>
          </select>
        </div>
      </div>
      
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">ØªÙˆØ²ÙŠØ¹ Ù‚ÙŠÙ… Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±Ø§Øª</div>
        </div>
        <canvas id="rentDistributionChart"></canvas>
      </div>
      
      <div class="table-container">
        <div class="table-header">
          <div class="table-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
          <div class="table-filters">
            <select class="table-filter" id="sortBy">
              <option value="id">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„</option>
              <option value="rent">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</option>
              <option value="name">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù…</option>
            </select>
            <select class="table-filter" id="sortOrder">
              <option value="asc">ØªØµØ§Ø¹Ø¯ÙŠ</option>
              <option value="desc">ØªÙ†Ø§Ø²Ù„ÙŠ</option>
            </select>
          </div>
        </div>
        <table id="shopsTable">
          <thead>
            <tr>
              <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„</th>
              <th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
              <th>Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</th>
              <th>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</th>
              <th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</th>
              <th>Ø¢Ø®Ø± Ø³Ø¯Ø§Ø¯</th>
              <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
          </thead>
          <tbody>
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
          </tbody>
        </table>
        <div id="shopsLoading" class="loading">
          <div class="loading-spinner"></div>
        </div>
        <div id="noShopsData" class="no-data" style="display: none;">
          Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„ØªØµÙÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
        </div>
      </div>
      
      <div id="shopDetails" style="display: none;">
        <div class="shop-details">
          <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø­Ù„: <span id="detailShopNumber"></span></h3>
          <p>Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±: <span id="detailTenant"></span></p>
          <p>Ø§Ù„Ù…Ø±Ø­Ù„Ø©: <span id="detailPhase"></span></p>
          <p>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±: <span id="detailRent"></span> Ø¯ÙŠÙ†Ø§Ø±/Ø´Ù‡Ø±</p>
          <p>Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹: <span id="detailPaymentStatus"></span></p>
          <p>ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ø³Ø¯Ø§Ø¯: <span id="detailLastPayment"></span></p>
          
          <div class="payment-history">
            <h4>Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h4>
            <div class="payment-months" id="paymentMonths">
              <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† -->
    <div class="tab-content" id="tenants">
      <div class="filters">
        <div class="filter-item">
          <label for="tenantCategoryFilter">Ø§Ù„ØªØµÙ†ÙŠÙ:</label>
          <select id="tenantCategoryFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="completed">Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†</option>
            <option value="incomplete">ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†</option>
            <option value="review">ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="tenantSearch">Ø¨Ø­Ø«:</label>
          <input type="text" id="tenantSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±">
        </div>
      </div>
      
      <div class="tenant-categories">
        <div class="category-card">
          <div class="category-header">
            <div class="category-title completed">Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†</div>
            <div class="category-count">0</div>
          </div>
          <div class="tenant-list" id="completedTenants">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
          </div>
        </div>
        
        <div class="category-card">
          <div class="category-header">
            <div class="category-title incomplete">Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†</div>
            <div class="category-count">0</div>
          </div>
          <div class="tenant-list" id="incompleteTenants">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
          </div>
        </div>
        
        <div class="category-card">
          <div class="category-header">
            <div class="category-title review">Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
            <div class="category-count">0</div>
          </div>
          <div class="tenant-list" id="reviewTenants">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- ØªÙ†Ø¨Ø¤ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª -->
    <div class="tab-content" id="prediction">
      <div class="prediction-card">
        <h3>ØªÙ†Ø¨Ø¤ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙÙŠ Ø­Ø§Ù„Ø© Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± 100%</h3>
        <p>Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø§Ø´Ø© ØªØ¸Ù‡Ø± ØªÙˆÙ‚Ø¹ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ÙÙŠ Ø­Ø§Ù„Ø© ØªØ·Ø¨ÙŠÙ‚ Ø²ÙŠØ§Ø¯Ø© Ø¨Ù†Ø³Ø¨Ø© 100% Ø¹Ù„Ù‰ Ø¥ÙŠØ¬Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª.</p>
        
        <div class="stats-cards">
          <div class="card">
            <div class="card-header">
              <div class="card-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´Ù‡Ñ€Ğ¸Ğ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
              <div class="card-icon">ğŸ’°</div>
            </div>
            <div class="card-value" id="currentMonthlyRevenue">0</div>
            <div class="card-change">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
          </div>
          
          <div class="card success">
            <div class="card-header">
              <div class="card-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©</div>
              <div class="card-icon">ğŸ“ˆ</div>
            </div>
            <div class="card-value" id="predictedMonthlyRevenue">0</div>
            <div class="card-change positive">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-label">Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</div>
              <div class="card-icon">ğŸ’¹</div>
            </div>
            <div class="card-value" id="predictedAnnualIncrease">0</div>
            <div class="card-change positive">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
          </div>
        </div>
        
        <div class="table-container">
          <table class="prediction-table">
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
                <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ù„Ø§Øª</th>
                <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø´Ù‡Ø±ÙŠ)</th>
                <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø© (Ø´Ù‡Ø±ÙŠ)</th>
                <th>Ø§Ù„ÙØ±Ù‚</th>
              </tr>
            </thead>
            <tbody id="predictionTableBody">
              <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="charts-container">
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©</div>
          </div>
          <canvas id="predictionChart"></canvas>
        </div>
        
        <div class="chart-card">
          <div class="chart-header">
            <div class="chart-title">ØªØ£Ø«ÙŠØ± Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©</div>
          </div>
          <canvas id="annualPredictionChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ -->
    <div class="tab-content" id="annual">
      <div class="filters">
        <div class="filter-item">
          <label for="yearFilter">Ø§Ù„Ø³Ù†Ø©:</label>
          <select id="yearFilter">
            <option value="2024">2024</option>
            <option value="2023">2023</option>
            <option value="2022">2022</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="annualPhaseFilter">Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</label>
          <select id="annualPhaseFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="1">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</option>
            <option value="2">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="annualStatusFilter">Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹:</label>
          <select id="annualStatusFilter">
            <option value="all">Ø§Ù„ÙƒÙ„</option>
            <option value="paid">Ù…Ø³Ø¯Ø¯</option>
            <option value="unpaid">ØºÙŠØ± Ù…Ø³Ø¯Ø¯</option>
            <option value="review">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
          </select>
        </div>
        
        <div class="filter-item">
          <label for="annualSearch">Ø¨Ø­Ø«:</label>
          <input type="text" id="annualSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±">
        </div>
      </div>
      
      <div class="stats-cards">
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©</div>
            <div class="card-icon">ğŸ’°</div>
          </div>
          <div class="card-value" id="annualRevenue">0</div>
          <div class="card-change">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­Ù„Ø§Øª</div>
            <div class="card-icon">ğŸª</div>
          </div>
          <div class="card-value" id="annualTotalShops">0</div>
          <div class="card-change">Ù…Ø­Ù„</div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
            <div class="card-icon">ğŸ“Š</div>
          </div>
          <div class="card-value" id="annualAvgRent">0</div>
          <div class="card-change">Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ</div>
        </div>
        
        <div class="card success">
          <div class="card-header">
            <div class="card-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø´ØºØ§Ù„</div>
            <div class="card-icon">ğŸ“ˆ</div>
          </div>
          <div class="card-value" id="occupancyRate">0%</div>
          <div class="card-change positive" id="occupancyCount">0 Ù…Ù† 0 Ù…Ø­Ù„</div>
        </div>
      </div>
      
      <div class="table-container">
        <div class="table-header">
          <div class="table-title">Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³Ù†ÙˆÙŠ</div>
          <div class="table-filters">
            <select class="table-filter" id="annualSortBy">
              <option value="id">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„</option>
              <option value="rent">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±</option>
              <option value="annualRent">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø³Ù†ÙˆÙŠ</option>
              <option value="paid">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯ÙÙˆØ¹</option>
              <option value="remaining">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</option>
            </select>
            <select class="table-filter" id="annualSortOrder">
              <option value="asc">ØªØµØ§Ø¹Ø¯ÙŠ</option>
              <option value="desc">ØªÙ†Ø§Ø²Ù„ÙŠ</option>
            </select>
          </div>
        </div>
        <table id="annualReportTable">
          <thead>
            <tr>
              <th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„</th>
              <th>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</th>
              <th>Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±</th>
              <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ</th>
              <th>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø³Ù†ÙˆÙŠ</th>
              <th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</th>
              <th>Ø§Ù„Ù…Ø¯ÙÙˆØ¹</th>
              <th>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>
            </tr>
          </thead>
          <tbody>
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JavaScript -->
          </tbody>
        </table>
        <div id="annualLoading" class="loading">
          <div class="loading-spinner"></div>
        </div>
        <div id="noAnnualData" class="no-data" style="display: none;">
          Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„ØªØµÙÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† (Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ù…Ù† Ù…Ù„Ù JSON)
    let tenantsData = [];

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    document.addEventListener('DOMContentLoaded', function() {
      fetchDataFromGitHub();
      setupEventListeners();
    });

    // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub
    async function fetchDataFromGitHub() {
      const loadingElement = document.createElement('div');
      loadingElement.className = 'loading';
      loadingElement.innerHTML = '<div class="loading-spinner"></div>';
      document.body.appendChild(loadingElement);

      try {
        const response = await fetch('https://raw.githubusercontent.com/alahlisc/Investment-project/main/tenants_data2025.json');
        if (!response.ok) {
          throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub');
        }
        tenantsData = await response.json();
        loadAllData();
      } catch (error) {
        console.error('Error fetching data:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        tenantsData = [
          { id: 1, phase: 1, name: "Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ø£Ø¨Ùˆ Ø´Ø¹Ø§Ù„Ø©", rent: 1500, status: "paid", lastPayment: "2024-09-30", area: 35 },
          { id: 2, phase: 1, name: "Ø¹Ø¨Ø¯ Ø§Ù„ÙˆÙ‡Ø§Ø¨ Ù…Ø­Ù…Ø¯", rent: 1500, status: "paid", lastPayment: "2025-02-28", area: 35 },
          { id: 3, phase: 1, name: "Ø¨Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙŠÙ† Ù…Ø­Ù…Ø¯ Ø¬Ø§Ø¯ Ø§Ù„Ù„Ù‡", rent: 1500, status: "paid", lastPayment: "2024-12-31", area: 35 },
          { id: 4, phase: 1, name: "Ù…Ø¹Ø² Ø§Ù„Ù…Ù†ÙŠØ± Ù…Ø­Ù…Ø¯ Ø§Ù„ØªØ±ÙŠÙƒÙŠ", rent: 1500, status: "paid", lastPayment: "2024-12-31", area: 35 },
          { id: 5, phase: 1, name: "Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø³Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø®ØªØ§Ø±", rent: 1500, status: "unpaid", lastPayment: "2024-06-30", area: 35 },
          { id: 6, phase: 1, name: "Ø­Ø³ÙŠÙ† Ø§Ø¨ÙˆØ¨ÙƒØ± Ø§Ù„Ø¹Ø²Ø§Ø¨ÙŠ", rent: 1500, status: "unpaid", lastPayment: "2024-10-30", area: 35 },
          { id: 7, phase: 1, name: "Ù†ÙˆØ±Ø§Ù„Ø¯ÙŠÙ† Ø³Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø®ØªØ§Ø±", rent: 1500, status: "review", lastPayment: "2024-09-30", area: 35 },
          { id: 8, phase: 1, name: "Ø¹Ù„ÙŠ Ø³Ø§Ù„Ù… Ø§Ù„ØªÙ„ÙŠØ³ÙŠ", rent: 2000, status: "unpaid", lastPayment: "2024-07-30", area: 40 },
          { id: 9, phase: 2, name: "Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø§Ù‡Ù„ÙŠØ© Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©", rent: 1000, status: "paid", lastPayment: "2024-12-31", area: 30 },
          { id: 10, phase: 2, name: "ÙØ±Ø¬ Ø§Ø­Ù…Ø¯ Ø§Ù„Ø­Ø±Ø§Ø±ÙŠ", rent: 1000, status: "paid", lastPayment: "2024-12-31", area: 30 },
          { id: 11, phase: 2, name: "Ø§Ù„Ø²Ø¨ÙŠØ± Ù…Ø­Ù…Ø¯ ØºÙŠØ·Ø©", rent: 1100, status: "unpaid", lastPayment: "2024-08-15", area: 32 },
          { id: 12, phase: 2, name: "ÙˆÙ„ÙŠØ¯ Ù…Ø­Ù…Ø¯ ØºÙŠØ·Ø©", rent: 1100, status: "unpaid", lastPayment: "2024-07-20", area: 32 },
          { id: 13, phase: 1, name: "ÙˆØ¬Ğ´Ğ¸ Ù…Ø­Ù…Ø¯", rent: 1250, status: "review", lastPayment: "2024-09-10", area: 33 },
          { id: 14, phase: 2, name: "Ù…Ø­Ù…Ø¯ ØµØ§Ù„Ø­ Ø§Ù„Ø¬Ù‡Ø§Ù†ÙŠ", rent: 1500, status: "unpaid", lastPayment: "2024-06-30", area: 35 },
          { id: 15, phase: 2, name: "Ø¹Ø¨Ø¯ Ø§Ù„Ù†Ø§ØµØ± Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯", rent: 1000, status: "unpaid", lastPayment: "2024-05-31", area: 30 },
          { id: 16, phase: 2, name: "Ø¹Ø¨Ø¯ Ø§Ù„Ù†Ø§ØµØ± Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯", rent: 1500, status: "unpaid", lastPayment: "2024-05-31", area: 35 },
          { id: 17, phase: 2, name: "Ø§Ù„Ø²Ø¨ÙŠØ± Ù…Ø­Ù…Ø¯ ØºÙŠØ·Ø©", rent: 1100, status: "unpaid", lastPayment: "2024-08-15", area: 32 },
          { id: 18, phase: 2, name: "Ø´Ø±ÙƒØ© Ø§Ù„Ù†Ø¬Ù…Ø© Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù†Ù‚Ù„", rent: 1100, status: "review", lastPayment: "2024-10-05", area: 32 },
          { id: 19, phase: 2, name: "ÙˆÙ„ÙŠØ¯ Ù…Ø­Ù…Ø¯ ØºÙŠØ·Ø©", rent: 1100, status: "unpaid", lastPayment: "2024-07-20", area: 32 },
          { id: 20, phase: 2, name: "Ø´Ø±ÙƒØ© Ø§Ù„Ø³Ù‡Ù„ Ø§Ù„Ø£ÙˆÙ„", rent: 1100, status: "review", lastPayment: "2024-09-25", area: 32 },
          { id: 21, phase: 1, name: "Ø¹Ù„ÙŠ Ù…ÙŠÙ„ÙˆØ¯ Ø§Ù…Ù‚Ø§ØªÙ„", rent: 1500, status: "review", lastPayment: "2024-08-20", area: 35 },
          { id: 22, phase: 1, name: "Ø¹Ù„ÙŠ Ù…ÙŠÙ„ÙˆØ¯ Ø§Ù…Ù‚Ø§ØªÙ„", rent: 1500, status: "review", lastPayment: "2024-08-20", area: 35 },
          { id: 23, phase: 1, name: "Ø¹Ù„ÙŠ Ù…ÙŠÙ„ÙˆØ¯ Ø§Ù…Ù‚Ø§ØªÙ„", rent: 1500, status: "review", lastPayment: "2024-08-20", area: 35 },
          { id: 24, phase: 1, name: "Ø¹Ù„ÙŠ Ù…ÙŠÙ„ÙˆØ¯ Ø§Ù…Ù‚Ø§ØªÙ„", rent: 1500, status: "review", lastPayment: "2024-08-20", area: 35 }
        ];
        loadAllData();
      } finally {
        document.body.removeChild(loadingElement);
      }
    }

    function loadAllData() {
      updateStats();
      initCharts();
      loadShopsTable();
      loadTenantsLists();
      loadAnnualReport();
      updatePredictionData();
    }

    function updateStats() {
      const totalShops = tenantsData.length;
      const completedShops = tenantsData.filter(shop => shop.status === 'paid').length;
      const incompleteShops = tenantsData.filter(shop => shop.status === 'unpaid').length;
      const reviewShops = tenantsData.filter(shop => shop.status === 'review').length;
      const totalArea = tenantsData.reduce((sum, shop) => sum + (shop.area || 0), 0);
      const totalRevenue = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      const avgRent = totalRevenue / totalShops || 0;
      
      document.getElementById('totalShops').textContent = totalShops;
      document.getElementById('completedShops').textContent = completedShops;
      document.getElementById('incompleteShops').textContent = incompleteShops;
      document.getElementById('reviewShops').textContent = reviewShops;
      document.getElementById('totalArea').textContent = `${totalArea} Ù…ØªØ± Ù…Ø±Ø¨Ø¹`;
      document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
      document.getElementById('paidShops').textContent = completedShops;
      document.getElementById('unpaidShops').textContent = incompleteShops;
      document.getElementById('avgRent').textContent = avgRent.toFixed(0);
      
      document.getElementById('completedPercentage').textContent = `${((completedShops / totalShops) * 100).toFixed(0)}%`;
      document.getElementById('incompletePercentage').textContent = `${((incompleteShops / totalShops) * 100).toFixed(0)}%`;
      document.getElementById('reviewPercentage').textContent = `${((reviewShops / totalShops) * 100).toFixed(0)}%`;
      document.getElementById('paidPercentage').textContent = `${((completedShops / totalShops) * 100).toFixed(0)}% Ù…Ù† Ø§Ù„Ù…Ø­Ù„Ø§Øª`;
      document.getElementById('unpaidPercentage').textContent = `${((incompleteShops / totalShops) * 100).toFixed(0)}% Ù…Ù† Ø§Ù„Ù…Ø­Ù„Ø§Øª`;
    }

    function updatePredictionData() {
      const totalRevenue = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      const predictedRevenue = totalRevenue * 2;
      const predictedAnnualIncrease = predictedRevenue * 12;
      
      document.getElementById('currentMonthlyRevenue').textContent = totalRevenue.toLocaleString();
      document.getElementById('predictedMonthlyRevenue').textContent = predictedRevenue.toLocaleString();
      document.getElementById('predictedAnnualIncrease').textContent = predictedAnnualIncrease.toLocaleString();
      
      // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ†Ø¨Ø¤
      const phase1Shops = tenantsData.filter(shop => shop.phase === 1);
      const phase2Shops = tenantsData.filter(shop => shop.phase === 2);
      
      const phase1Revenue = phase1Shops.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      const phase2Revenue = phase2Shops.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      
      const predictionTableBody = document.getElementById('predictionTableBody');
      predictionTableBody.innerHTML = `
        <tr>
          <td>Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</td>
          <td>${phase1Shops.length}</td>
          <td>${phase1Revenue.toLocaleString()} Ø¯.Ù„</td>
          <td>${(phase1Revenue * 2).toLocaleString()} Ø¯.Ù„</td>
          <td class="positive">+${phase1Revenue.toLocaleString()} Ø¯.Ù„</td>
        </tr>
        <tr>
          <td>Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2</td>
          <td>${phase2Shops.length}</td>
          <td>${phase2Revenue.toLocaleString()} Ø¯.Ù„</td>
          <td>${(phase2Revenue * 2).toLocaleString()} Ø¯.Ù„</td>
          <td class="positive">+${phase2Revenue.toLocaleString()} Ø¯.Ù„</td>
        </tr>
        <tr>
          <td>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</td>
          <td>${tenantsData.length}</td>
          <td>${totalRevenue.toLocaleString()} Ø¯.Ù„</td>
          <td>${predictedRevenue.toLocaleString()} Ø¯.Ù„</td>
          <td class="positive">+${totalRevenue.toLocaleString()} Ø¯.Ù„</td>
        </tr>
      `;
    }

    function initCharts() {
      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø­Ù„
      const phaseCtx = document.getElementById('phaseComparisonChart').getContext('2d');
      const phase1Revenue = tenantsData
        .filter(shop => shop.phase === 1)
        .reduce((sum, shop) => sum + (shop.rent || 0), 0);
      
      const phase2Revenue = tenantsData
        .filter(shop => shop.phase === 2)
        .reduce((sum, shop) => sum + (shop.rent || 0), 0);
      
      new Chart(phaseCtx, {
        type: 'bar',
        data: {
          labels: ['Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1', 'Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2'],
          datasets: [{
            label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´Ù‡Ø±ÙŠ',
            data: [phase1Revenue, phase2Revenue],
            backgroundColor: ['rgba(0, 100, 0, 0.7)', 'rgba(10, 61, 98, 0.7)'],
            borderColor: ['rgb(0, 100, 0)', 'rgb(10, 61, 98)'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù…Ø±Ø§Ø­Ù„',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + ' Ø¯.Ù„';
                }
              }
            }
          }
        }
      });

      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹
      const paymentCtx = document.getElementById('paymentStatusChart').getContext('2d');
      const paidCount = tenantsData.filter(shop => shop.status === 'paid').length;
      const unpaidCount = tenantsData.filter(shop => shop.status === 'unpaid').length;
      const reviewCount = tenantsData.filter(shop => shop.status === 'review').length;
      
      new Chart(paymentCtx, {
        type: 'doughnut',
        data: {
          labels: ['Ù…Ø³Ø¯Ø¯', 'ØºÙŠØ± Ù…Ø³Ø¯Ø¯', 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'],
          datasets: [{
            data: [paidCount, unpaidCount, reviewCount],
            backgroundColor: ['#10b981', '#ef4444', '#f59e0b'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'bottom',
              rtl: true,
              labels: {
                font: {
                  family: 'Cairo'
                }
              }
            },
            title: {
              display: true,
              text: 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            }
          }
        }
      });

      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
      const monthlyCtx = document.getElementById('monthlyRevenueChart').getContext('2d');
      const monthlyRevenue = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      
      new Chart(monthlyCtx, {
        type: 'line',
        data: {
          labels: ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'],
          datasets: [{
            label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´Ù‡Ø±ÙŠ',
            data: Array(12).fill(0).map((_, i) => i < 9 ? monthlyRevenue * 0.9 + (monthlyRevenue * 0.1 * i) : monthlyRevenue),
            fill: true,
            backgroundColor: 'rgba(0, 100, 0, 0.1)',
            borderColor: 'rgb(0, 100, 0)',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ø®Ù„Ø§Ù„ Ø§Ù„Ø³Ù†Ø©',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + ' Ø¯.Ù„';
                }
              }
            }
          }
        }
      });

      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ØªÙ†Ø¨Ø¤
      const predictionCtx = document.getElementById('predictionChart').getContext('2d');
      const totalRevenue = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0);
      const predictedRevenue = totalRevenue * 2;
      
      new Chart(predictionCtx, {
        type: 'bar',
        data: {
          labels: ['Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ', 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©'],
          datasets: [{
            label: 'Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ',
            data: [totalRevenue, predictedRevenue],
            backgroundColor: ['rgba(0, 100, 0, 0.7)', 'rgba(10, 61, 98, 0.7)'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø²ÙŠØ§Ø¯Ø© 100%',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + ' Ø¯.Ù„';
                }
              }
            }
          }
        }
      });

      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±Ø§Øª
      const rentCtx = document.getElementById('rentDistributionChart').getContext('2d');
      const rentRanges = {
        'Ø£Ù‚Ù„ Ù…Ù† 1000': tenantsData.filter(shop => (shop.rent || 0) < 1000).length,
        '1000 - 1500': tenantsData.filter(shop => (shop.rent || 0) >= 1000 && (shop.rent || 0) <= 1500).length,
        'Ø£ÙƒØ«Ø± Ù…Ù† 1500': tenantsData.filter(shop => (shop.rent || 0) > 1500).length
      };
      
      new Chart(rentCtx, {
        type: 'bar',
        data: {
          labels: Object.keys(rentRanges),
          datasets: [{
            label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ù„Ø§Øª',
            data: Object.values(rentRanges),
            backgroundColor: ['rgba(0, 100, 0, 0.7)', 'rgba(10, 61, 98, 0.7)', 'rgba(245, 158, 11, 0.7)'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø­Ø³Ø¨ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                precision: 0
              }
            }
          }
        }
      });

      // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù„ØªÙ†Ø¨Ø¤ Ø§Ù„Ø³Ù†ÙˆÙŠ
      const annualPredictionCtx = document.getElementById('annualPredictionChart').getContext('2d');
      const currentAnnual = totalRevenue * 12;
      const predictedAnnual = predictedRevenue * 12;
      
      new Chart(annualPredictionCtx, {
        type: 'bar',
        data: {
          labels: ['Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ', 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹'],
          datasets: [{
            label: 'Ø¯ÙŠÙ†Ø§Ø± Ù„ÙŠØ¨ÙŠ',
            data: [currentAnnual, predictedAnnual],
            backgroundColor: ['rgba(0, 100, 0, 0.7)', 'rgba(10, 61, 98, 0.7)'],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: 'Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©',
              color: '#006400',
              font: {
                size: 16,
                family: 'Cairo'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + ' Ø¯.Ù„';
                }
              }
            }
          }
        }
      });
    }

    function loadShopsTable() {
      const tableBody = document.querySelector('#shopsTable tbody');
      const loadingElement = document.getElementById('shopsLoading');
      const noDataElement = document.getElementById('noShopsData');
      
      loadingElement.style.display = 'flex';
      tableBody.innerHTML = '';
      noDataElement.style.display = 'none';
      
      setTimeout(() => {
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„ØªØ±ØªÙŠØ¨
        let filteredData = [...tenantsData];
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
        const phaseFilter = document.getElementById('phaseFilter').value;
        if (phaseFilter !== 'all') {
          filteredData = filteredData.filter(shop => shop.phase == phaseFilter);
        }
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹
        const paymentFilter = document.getElementById('paymentFilter').value;
        if (paymentFilter !== 'all') {
          filteredData = filteredData.filter(shop => shop.status === paymentFilter);
        }
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±
        const rentFilter = document.getElementById('rentFilter').value;
        if (rentFilter !== 'all') {
          if (rentFilter === '0-1000') {
            filteredData = filteredData.filter(shop => (shop.rent || 0) < 1000);
          } else if (rentFilter === '1000-1500') {
            filteredData = filteredData.filter(shop => (shop.rent || 0) >= 1000 && (shop.rent || 0) <= 1500);
          } else if (rentFilter === '1500+') {
            filteredData = filteredData.filter(shop => (shop.rent || 0) > 1500);
          }
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù†Øµ
        const searchText = document.getElementById('shopFilter').value.toLowerCase();
        if (searchText) {
          filteredData = filteredData.filter(shop => 
            shop.id.toString().includes(searchText) || 
            shop.name.toLowerCase().includes(searchText)
          );
        }
        
        // Ø§Ù„ØªØ±ØªÙŠØ¨
        const sortBy = document.getElementById('sortBy').value;
        const sortOrder = document.getElementById('sortOrder').value;
        
        filteredData.sort((a, b) => {
          let valueA, valueB;
          
          if (sortBy === 'id') {
            valueA = a.id;
            valueB = b.id;
          } else if (sortBy === 'rent') {
            valueA = a.rent || 0;
            valueB = b.rent || 0;
          } else if (sortBy === 'name') {
            valueA = a.name;
            valueB = b.name;
          }
          
          if (sortOrder === 'asc') {
            return valueA > valueB ? 1 : -1;
          } else {
            return valueA < valueB ? 1 : -1;
          }
        });
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (filteredData.length === 0) {
          noDataElement.style.display = 'block';
        } else {
          filteredData.forEach(shop => {
            const row = document.createElement('tr');
            let statusBadge = '';
            
            if (shop.status === 'paid') {
              statusBadge = '<span class="tenant-status status-completed">Ù…Ø³Ø¯Ø¯</span>';
            } else if (shop.status === 'unpaid') {
              statusBadge = '<span class="tenant-status status-incomplete">ØºÙŠØ± Ù…Ø³Ø¯Ø¯</span>';
            } else {
              statusBadge = '<span class="tenant-status status-review">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>';
            }
            
            row.innerHTML = `
              <td>${shop.id}</td>
              <td>Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${shop.phase}</td>
              <td>${shop.name}</td>
              <td>${(shop.rent || 0).toLocaleString()} Ø¯.Ù„</td>
              <td>${statusBadge}</td>
              <td>${shop.lastPayment || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</td>
              <td><button class="view-details" data-id="${shop.id}">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button></td>
            `;
            
            tableBody.appendChild(row);
          });
        }
        
        loadingElement.style.display = 'none';
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø£Ø²Ø±Ø§Ø±
        document.querySelectorAll('.view-details').forEach(button => {
          button.addEventListener('click', function() {
            const shopId = this.getAttribute('data-id');
            showShopDetails(shopId);
          });
        });
      }, 500);
    }

    function loadTenantsLists() {
      const completedList = document.getElementById('completedTenants');
      const incompleteList = document.getElementById('incompleteTenants');
      const reviewList = document.getElementById('reviewTenants');
      
      // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«
      const searchText = document.getElementById('tenantSearch').value.toLowerCase();
      const categoryFilter = document.getElementById('tenantCategoryFilter').value;
      
      const completedTenants = tenantsData.filter(tenant => 
        tenant.status === 'paid' && 
        (categoryFilter === 'all' || categoryFilter === 'completed') &&
        (tenant.name.toLowerCase().includes(searchText) || tenant.id.toString().includes(searchText))
      );
      
      const incompleteTenants = tenantsData.filter(tenant => 
        tenant.status === 'unpaid' && 
        (categoryFilter === 'all' || categoryFilter === 'incomplete') &&
        (tenant.name.toLowerCase().includes(searchText) || tenant.id.toString().includes(searchText))
      );
      
      const reviewTenants = tenantsData.filter(tenant => 
        tenant.status === 'review' && 
        (categoryFilter === 'all' || categoryFilter === 'review') &&
        (tenant.name.toLowerCase().includes(searchText) || tenant.id.toString().includes(searchText))
      );
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
      document.querySelector('.category-card:nth-child(1) .category-count').textContent = completedTenants.length;
      document.querySelector('.category-card:nth-child(2) .category-count').textContent = incompleteTenants.length;
      document.querySelector('.category-card:nth-child(3) .category-count').textContent = reviewTenants.length;
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†
      completedList.innerHTML = '';
      if (completedTenants.length === 0) {
        completedList.innerHTML = '<div class="no-data">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>';
      } else {
        completedTenants.forEach(tenant => {
          const tenantItem = document.createElement('div');
          tenantItem.className = 'tenant-item';
          tenantItem.innerHTML = `
            <div class="tenant-info">
              <div class="tenant-name">${tenant.name}</div>
              <div class="tenant-details">Ù…Ø­Ù„ ${tenant.id} - Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${tenant.phase} - ${(tenant.rent || 0).toLocaleString()} Ø¯.Ù„/Ø´Ù‡Ø±</div>
            </div>
            <span class="tenant-status status-completed">Ù…ÙƒØªÙ…Ù„</span>
          `;
          completedList.appendChild(tenantItem);
        });
      }
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„ÙŠÙ†
      incompleteList.innerHTML = '';
      if (incompleteTenants.length === 0) {
        incompleteList.innerHTML = '<div class="no-data">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>';
      } else {
        incompleteTenants.forEach(tenant => {
          const tenantItem = document.createElement('div');
          tenantItem.className = 'tenant-item';
          tenantItem.innerHTML = `
            <div class="tenant-info">
              <div class="tenant-name">${tenant.name}</div>
              <div class="tenant-details">Ù…Ø­Ù„ ${tenant.id} - Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${tenant.phase} - ${(tenant.rent || 0).toLocaleString()} Ø¯.Ù„/Ø´Ù‡Ø±</div>
            </div>
            <span class="tenant-status status-incomplete">ØºÙŠØ± Ù…ÙƒØªÙ…Ù„</span>
          `;
          incompleteList.appendChild(tenantItem);
        });
      }
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
      reviewList.innerHTML = '';
      if (reviewTenants.length === 0) {
        reviewList.innerHTML = '<div class="no-data">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</div>';
      } else {
        reviewTenants.forEach(tenant => {
          const tenantItem = document.createElement('div');
          tenantItem.className = 'tenant-item';
          tenantItem.innerHTML = `
            <div class="tenant-info">
              <div class="tenant-name">${tenant.name}</div>
              <div class="tenant-details">Ù…Ø­Ù„ ${tenant.id} - Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${tenant.phase} - ${(tenant.rent || 0).toLocaleString()} Ø¯.Ù„/Ø´Ù‡Ø±</div>
            </div>
            <span class="tenant-status status-review">ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
          `;
          reviewList.appendChild(tenantItem);
        });
      }
    }

    function loadAnnualReport() {
      const tableBody = document.querySelector('#annualReportTable tbody');
      const loadingElement = document.getElementById('annualLoading');
      const noDataElement = document.getElementById('noAnnualData');
      
      loadingElement.style.display = 'flex';
      tableBody.innerHTML = '';
      noDataElement.style.display = 'none';
      
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©
      const annualRevenue = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0) * 12;
      const avgRent = tenantsData.reduce((sum, shop) => sum + (shop.rent || 0), 0) / tenantsData.length || 0;
      
      document.getElementById('annualRevenue').textContent = annualRevenue.toLocaleString();
      document.getElementById('annualTotalShops').textContent = tenantsData.length;
      document.getElementById('annualAvgRent').textContent = avgRent.toFixed(0);
      document.getElementById('occupancyRate').textContent = '100%';
      document.getElementById('occupancyCount').textContent = `${tenantsData.length} Ù…Ù† ${tenantsData.length} Ù…Ø­Ù„`;
      
      setTimeout(() => {
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„ØªØ±ØªÙŠØ¨
        let filteredData = [...tenantsData];
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø³Ù†Ø© (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ù„Ø³Ù†ÙˆØ§Øª)
        const yearFilter = document.getElementById('yearFilter').value;
        // Ù‡Ø°Ù‡ Ù…Ø¬Ø±Ø¯ Ù…Ø­Ø§ÙƒØ§Ø© - ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª Ø³Ù†ÙˆÙŠØ© ÙØ¹Ù„ÙŠØ©
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
        const phaseFilter = document.getElementById('annualPhaseFilter').value;
        if (phaseFilter !== 'all') {
          filteredData = filteredData.filter(shop => shop.phase == phaseFilter);
        }
        
        // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹
        const statusFilter = document.getElementById('annualStatusFilter').value;
        if (statusFilter !== 'all') {
          filteredData = filteredData.filter(shop => shop.status === statusFilter);
        }
        
        // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù†Øµ
        const searchText = document.getElementById('annualSearch').value.toLowerCase();
        if (searchText) {
          filteredData = filteredData.filter(shop => 
            shop.id.toString().includes(searchText) || 
            shop.name.toLowerCase().includes(searchText)
          );
        }
        
        // Ø§Ù„ØªØ±ØªÙŠØ¨
        const sortBy = document.getElementById('annualSortBy').value;
        const sortOrder = document.getElementById('annualSortOrder').value;
        
        filteredData.sort((a, b) => {
          let valueA, valueB;
          
          if (sortBy === 'id') {
            valueA = a.id;
            valueB = b.id;
          } else if (sortBy === 'rent') {
            valueA = a.rent || 0;
            valueB = b.rent || 0;
          } else if (sortBy === 'annualRent') {
            valueA = (a.rent || 0) * 12;
            valueB = (b.rent || 0) * 12;
          } else if (sortBy === 'paid') {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ - ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©
            valueA = a.status === 'paid' ? (a.rent || 0) * 12 : (a.rent || 0) * 6;
            valueB = b.status === 'paid' ? (b.rent || 0) * 12 : (b.rent || 0) * 6;
          } else if (sortBy === 'remaining') {
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ - ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©
            valueA = a.status === 'paid' ? 0 : (a.rent || 0) * 6;
            valueB = b.status === 'paid' ? 0 : (b.rent || 0) * 6;
          }
          
          if (sortOrder === 'asc') {
            return valueA > valueB ? 1 : -1;
          } else {
            return valueA < valueB ? 1 : -1;
          }
        });
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (filteredData.length === 0) {
          noDataElement.style.display = 'block';
        } else {
          filteredData.forEach(shop => {
            const row = document.createElement('tr');
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ© - ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©
            const annualRent = (shop.rent || 0) * 12;
            let paidAmount = 0;
            let remainingAmount = 0;
            let statusBadge = '';
            
            if (shop.status === 'paid') {
              paidAmount = annualRent;
              remainingAmount = 0;
              statusBadge = '<span class="tenant-status status-completed">Ù…ÙƒØªÙ…Ù„</span>';
            } else if (shop.status === 'unpaid') {
              paidAmount = annualRent / 2;
              remainingAmount = annualRent / 2;
              statusBadge = '<span class="tenant-status status-incomplete">ØºÙŠØ± Ù…ÙƒØªÙ…Ù„</span>';
            } else {
              paidAmount = annualRent / 2;
              remainingAmount = annualRent / 2;
              statusBadge = '<span class="tenant-status status-review">ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>';
            }
            
            row.innerHTML = `
              <td>${shop.id}</td>
              <td>Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${shop.phase}</td>
              <td>${shop.name}</td>
              <td>${(shop.rent || 0).toLocaleString()} Ø¯.Ù„</td>
              <td>${annualRent.toLocaleString()} Ø¯.Ù„</td>
              <td>${statusBadge}</td>
              <td>${paidAmount.toLocaleString()} Ø¯.Ù„</td>
              <td>${remainingAmount.toLocaleString()} Ø¯.Ù„</td>
            `;
            
            tableBody.appendChild(row);
          });
        }
        
        loadingElement.style.display = 'none';
      }, 500);
    }

    function showShopDetails(shopId) {
      const shop = tenantsData.find(s => s.id == shopId);
      if (!shop) return;
      
      document.getElementById('detailShopNumber').textContent = shop.id;
      document.getElementById('detailTenant').textContent = shop.name;
      document.getElementById('detailPhase').textContent = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${shop.phase}`;
      document.getElementById('detailRent').textContent = (shop.rent || 0).toLocaleString();
      
      let statusText = '';
      if (shop.status === 'paid') {
        statusText = '<span class="tenant-status status-completed">Ù…Ø³Ø¯Ø¯</span>';
      } else if (shop.status === 'unpaid') {
        statusText = '<span class="tenant-status status-incomplete">ØºÙŠØ± Ù…Ø³Ø¯Ø¯</span>';
      } else {
        statusText = '<span class="tenant-status status-review">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>';
      }
      
      document.getElementById('detailPaymentStatus').innerHTML = statusText;
      document.getElementById('detailLastPayment').textContent = shop.lastPayment || 'ØºÙŠØ± Ù…ØªÙˆÙØ±';
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
      const paymentMonths = document.getElementById('paymentMonths');
      paymentMonths.innerHTML = '';
      
      const months = ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 
                     'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'];
      
      const currentMonth = new Date().getMonth();
      
      for (let i = 0; i <= currentMonth; i++) {
        const monthDiv = document.createElement('div');
        monthDiv.className = 'payment-month';
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹ Ù„ÙƒÙ„ Ø´Ù‡Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ù„
        let isPaid = false;
        if (shop.status === 'paid') {
          isPaid = true;
        } else if (shop.status === 'unpaid') {
          isPaid = Math.random() > 0.7; // 30% chance of being paid for unpaid shops
        } else {
          isPaid = Math.random() > 0.5; // 50% chance of being paid for review shops
        }
        
        if (isPaid) {
          monthDiv.classList.add('paid');
          monthDiv.textContent = `${months[i]} âœ“`;
        } else {
          monthDiv.classList.add('unpaid');
          monthDiv.textContent = `${months[i]} âœ—`;
        }
        
        paymentMonths.appendChild(monthDiv);
      }
      
      document.getElementById('shopDetails').style.display = 'block';
      
      // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„ØªÙØ§ØµÙŠÙ„
      document.getElementById('shopDetails').scrollIntoView({ behavior: 'smooth' });
    }

    function setupEventListeners() {
      // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
      document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', function() {
          // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨
          document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          
          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ø¥Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
          this.classList.add('active');
          const tabId = this.getAttribute('data-tab');
          document.getElementById(tabId).classList.add('active');
        });
      });
      
      // Ù…Ø±Ø´Ø­Ø§Øª Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­Ù„Ø§Øª
      document.getElementById('phaseFilter').addEventListener('change', () => loadShopsTable());
      document.getElementById('paymentFilter').addEventListener('change', () => loadShopsTable());
      document.getElementById('rentFilter').addEventListener('change', () => loadShopsTable());
      document.getElementById('shopFilter').addEventListener('input', () => loadShopsTable());
      document.getElementById('sortBy').addEventListener('change', () => loadShopsTable());
      document.getElementById('sortOrder').addEventListener('change', () => loadShopsTable());
      
      // Ù…Ø±Ø´Ø­Ø§Øª ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†
      document.getElementById('tenantCategoryFilter').addEventListener('change', () => loadTenantsLists());
      document.getElementById('tenantSearch').addEventListener('input', () => loadTenantsLists());
      
      // Ù…Ø±Ø´Ø­Ø§Øª Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ
      document.getElementById('yearFilter').addEventListener('change', () => loadAnnualReport());
      document.getElementById('annualPhaseFilter').addEventListener('change', () => loadAnnualReport());
      document.getElementById('annualStatusFilter').addEventListener('change', () => loadAnnualReport());
      document.getElementById('annualSearch').addEventListener('input', () => loadAnnualReport());
      document.getElementById('annualSortBy').addEventListener('change', () => loadAnnualReport());
      document.getElementById('annualSortOrder').addEventListener('change', () => loadAnnualReport());
      
      // Ø²Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      document.getElementById('refreshData').addEventListener('click', () => {
        fetchDataFromGitHub();
      });
    }

    function exportToExcel() {
      // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±
      const dataForExport = tenantsData.map(shop => ({
        'Ø±Ù‚Ù… Ø§Ù„Ù…Ø­Ù„': shop.id,
        'Ø§Ù„Ù…Ø±Ø­Ù„Ø©': shop.phase,
        'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±': shop.name,
        'Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø±': shop.rent || 0,
        'Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹': shop.status === 'paid' ? 'Ù…Ø³Ø¯Ø¯' : (shop.status === 'unpaid' ? 'ØºÙŠØ± Ù…Ø³Ø¯Ø¯' : 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'),
        'Ø¢Ø®Ø± Ø³Ø¯Ø§Ø¯': shop.lastPayment || 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
        'Ø§Ù„Ù…Ø³Ø§Ø­Ø©': shop.area || 0
      }));
      
      // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ±Ù‚Ø© Ø¹Ù…Ù„
      const ws = XLSX.utils.json_to_sheet(dataForExport);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙ†Ù ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ±Ù‚Ø©
      const wb = XLSX.utils.book_new();
      XLSX.utils.book_append_sheet(wb, ws, 'Ø§Ù„Ù…Ø­Ù„Ø§Øª');
      
      // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ù„Ù
      XLSX.writeFile(wb, 'ØªÙ‚Ø±ÙŠØ±_Ø§Ù„Ù…Ø­Ù„Ø§Øª.xlsx');
    }
  </script>
</body>
</html>
